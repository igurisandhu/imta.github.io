<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" href="./style.css" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
        integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
        crossorigin="anonymous" />
</head>

<body contenteditable="false" >
    <div class="main">

        <div class="flexdivs" id="mainImagesDiv">
            <div id="images">

            </div>
            <div id="images1">

            </div>
            <div class="slide-me">
                <h3>Slide Me</h3>
            </div>
        </div>

        <div id="text1" onscroll="arrowAni()" class="flexdivs text">

            <div id="overlay">

            </div>

            <div onscroll="arrowAni()" class="content">
                <!-- <p> -->
                <h2>Καιρός – Κακοκαιρία «Ελπίδα»: Χιόνια ήδη στην Αθήνα – Πού θα χιονίσει τις επόμενες ώρες</h2>

                <span>Η κακοκαιρία Ελπίς χτυπά πολλές περιοχές της χώρας με τα κύρια χαρακτηριστικά του καιρού
                    να είναι οι πολικές θερμοκρασίες και οι πυκνές χιονοπτώσεις.</span>

                <span>Εξαίρεση δεν αποτελεί η Αττική, καθώς έχουμε χιονοπτώσεις από τις πρώτες ώρες του Σαββάτου σε
                    Υμηττό,
                    Πάρνηθα και Πεντέλη, χωρίς ωστόσο η κακοκαιρία να έχει δημιουργήσει ιδιαίτερα προβλήματα με τα πιο
                    δύσκολα να βρίσκονται προς των πυλών.</span>

                <span>Οι δήμοι της Αττικής και ειδικά στα βόρεια του νομού είναι σε πλήρη ετοιμότητα προκειμένου να
                    αντιμετωπίζουν την επέλαση του χιονιά.</span>

                <span>
                    Συνολικά 80 εκχιονιστικά μηχανήματα στην Αττική βρίσκονται επί ποδός και είναι τους δρόμους από το
                    βράδυ
                    της Παρασκευής, ενώ δυόμισι τόνοι αλάτι θα είναι διαθέσιμοι σε 10 σημεία για να μπορούν να τα
                    προμηθευτούν οι δήμοι. Δύο ακόμα μηχανήματα θα είναι σε ετοιμότητα για τον απεγκλωβισμό ατόμων.
                </span>

                <span>Η κακοκαιρία Ελπίς χτυπά πολλές περιοχές της χώρας με τα κύρια χαρακτηριστικά του καιρού
                    να είναι οι πολικές θερμοκρασίες και οι πυκνές χιονοπτώσεις.</span>

                <span>Εξαίρεση δεν αποτελεί η Αττική, καθώς έχουμε χιονοπτώσεις από τις πρώτες ώρες του Σαββάτου σε
                    Υμηττό,
                    Πάρνηθα και Πεντέλη, χωρίς ωστόσο η κακοκαιρία να έχει δημιουργήσει ιδιαίτερα προβλήματα με τα πιο
                    δύσκολα να βρίσκονται προς των πυλών.</span>

                <span>Οι δήμοι της Αττικής και ειδικά στα βόρεια του νομού είναι σε πλήρη ετοιμότητα προκειμένου να
                    αντιμετωπίζουν την επέλαση του χιονιά.</span>

                <span>
                    Συνολικά 80 εκχιονιστικά μηχανήματα στην Αττική βρίσκονται επί ποδός και είναι τους δρόμους από το
                    βράδυ
                    της Παρασκευής, ενώ δυόμισι τόνοι αλάτι θα είναι διαθέσιμοι σε 10 σημεία για να μπορούν να τα
                    προμηθευτούν οι δήμοι. Δύο ακόμα μηχανήματα θα είναι σε ετοιμότητα για τον απεγκλωβισμό ατόμων.
                </span>

                <h3>Σε λευκό κλοιό η Βόρεια Ελλάδα</h3>

                <span>Από τη Βόρεια Ελλάδα ξεκίνησε ήδη η επέλαση της κακοκαιρίας «Ελπίς», που από το βράδυ της
                    Παρασκευής
                    έχει «ντύσει στα λευκά» πολλές περιοχές, κατευθυνόμενη προς τα νότια.</span>
                <span> Εξαίρεση δεν αποτελεί η Αττική, καθώς έχουμε χιονοπτώσεις από τις πρώτες ώρες του Σαββάτου σε
                    Υμηττό,
                    Πάρνηθα και Πεντέλη, χωρίς ωστόσο η κακοκαιρία να έχει δημιουργήσει ιδιαίτερα προβλήματα με τα πιο
                    δύσκολα να βρίσκονται προς των πυλών.</span>


                <span>Οι δήμοι της Αττικής και ειδικά στα βόρεια του νομού είναι σε πλήρη ετοιμότητα προκειμένου να
                    αντιμετωπίζουν την επέλαση του χιονιά.</span>
                <span>
                    Συνολικά 80 εκχιονιστικά μηχανήματα στην Αττική βρίσκονται επί ποδός και είναι τους δρόμους από το
                    βράδυ
                    της Παρασκευής, ενώ δυόμισι τόνοι αλάτι θα είναι διαθέσιμοι σε 10 σημεία για να μπορούν να τα
                    προμηθευτούν οι δήμοι. Δύο ακόμα μηχανήματα θα είναι σε ετοιμότητα για τον απεγκλωβισμό
                    ατόμων.</span>

                <span>Από τη Βόρεια Ελλάδα ξεκίνησε ήδη η επέλαση της κακοκαιρίας «Ελπίς», που από το βράδυ της
                    Παρασκευής
                    έχει «ντύσει στα λευκά» πολλές περιοχές, κατευθυνόμενη προς τα νότια.</span>
                <span> Εξαίρεση δεν αποτελεί η Αττική, καθώς έχουμε χιονοπτώσεις από τις πρώτες ώρες του Σαββάτου σε
                    Υμηττό,
                    Πάρνηθα και Πεντέλη, χωρίς ωστόσο η κακοκαιρία να έχει δημιουργήσει ιδιαίτερα προβλήματα με τα πιο
                    δύσκολα να βρίσκονται προς των πυλών.</span>


                <span>Οι δήμοι της Αττικής και ειδικά στα βόρεια του νομού είναι σε πλήρη ετοιμότητα προκειμένου να
                    αντιμετωπίζουν την επέλαση του χιονιά.</span>
                <span>
                    Συνολικά 80 εκχιονιστικά μηχανήματα στην Αττική βρίσκονται επί ποδός και είναι τους δρόμους από το
                    βράδυ
                    της Παρασκευής, ενώ δυόμισι τόνοι αλάτι θα είναι διαθέσιμοι σε 10 σημεία για να μπορούν να τα
                    προμηθευτούν οι δήμοι. Δύο ακόμα μηχανήματα θα είναι σε ετοιμότητα για τον απεγκλωβισμό
                    ατόμων.</span>

                <!-- </p> -->
            </div>
        </div>
        <div class="arrowDiv">
            <img id="arrow" src="img/arrow-down.png">
            <!-- <img id="arrow" src="img/cross.png"> -->
        </div>
    </div>

    <script>

        loadCSS('/style');

        // elements access
        let arrow = document.getElementById('arrow');
        let divText = document.getElementById('text1');
        let overlay = document.getElementById('overlay');
        let images = document.getElementById('images');
        let images1 = document.getElementById('images1');

        // disable mouse wheel scroll
        // divText.addEventListener("mousewheel", MouseWheelHandler, false);
        function MouseWheelHandler(e) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }

        //auto scroll to top bottom
        divText.onmouseup = function () {
            let scrollPortion = (divText.scrollTop / divText.scrollHeight) * 100;
            if (scrollPortion > 45) {
                divText.scrollTop = divText.scrollHeight;
            } else {
                divText.scrollTop = 0;
            }
        }

        // disable arrow key scroll
        // window.onkeydown = function (e) {
        //     if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
        //         e.view.event.preventDefault();
        //     }
        // }
        // // disable arrow key scroll
        // window.onkeypress = function (e) {
        //     if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
        //         e.view.event.preventDefault();
        //     }
        // }

        // images
        let imagesArray = [
            "img/image1.png",
            "img/image2.png",
            "img/image1.png",
            "img/image2.png",
            "img/image1.png",
            "img/image2.png",
        ];


        images.style.backgroundImage = `url('${imagesArray[0]}')`;
        images1.style.opacity = 1;
        if (imagesArray.length > 0) {
            images1.style.backgroundImage = `url('${imagesArray[1]}')`;
            images1.style.opacity = 0;
        }
        let breakPoint = 100 / (imagesArray.length + 1);
        let combinations = [{ start: 0, end: breakPoint }];
        for (let i = 1; i < imagesArray.length; i++) {
            let obj = { start: combinations[i - 1].end + 1, end: combinations[i - 1].end + breakPoint };
            combinations.push(obj);
        };

        function arrowAni() {
            let scrollPortion = (divText.scrollTop / divText.scrollHeight) * 100;
            // arrow.style.transform = `rotateY(${Math.floor(scrollPortion)}deg)`;
            // arrow.style.transform = `rotateY(${Math.floor(scrollPortion)}deg)`;
            arrow.style.top = `${Math.floor(scrollPortion)}%`;

            overlay.style.top = divText.scrollTop + 'px';
            overlay.style.background = `-webkit-gradient(linear, left top, left bottom, color-stop(${Math.floor(scrollPortion) - 30}%, rgba(26, 26, 26, 70%)), color-stop(${Math.floor(scrollPortion) + 20}%, rgba(255, 255, 255, 0)), color-stop(100%, rgba(26, 26, 26, 70%)));`;

            overlay.style.background = `-webkit-linear-gradient(rgba(26, 26, 26, 70%) ${Math.floor(scrollPortion) - 30}%, rgba(255, 255, 255, 0) ${Math.floor(scrollPortion) + 20}%, rgba(26, 26, 26, 100%) 100%)`;

            if (divText.scrollTop == 0) {
                overlay.style.background = `-webkit-gradient(linear, left top, left bottom, color-stop(${Math.floor(scrollPortion)}%, rgba(26, 26, 26, 70%)), color-stop(${Math.floor(scrollPortion)}%, rgba(255, 255, 255, 0)), color-stop(100%, rgba(26, 26, 26, 70%)));`;

                overlay.style.background = `-webkit-linear-gradient(rgba(26, 26, 26, 100%) ${Math.floor(scrollPortion)}%, rgba(255, 255, 255, 0) ${Math.floor(scrollPortion)}%, rgba(26, 26, 26, 100%) 100%)`;
            }

            for (let i = 0; i < combinations.length; i++) {
                if (combinations[i].start < scrollPortion && combinations[i].end > scrollPortion) {
                    images.style.backgroundImage = `url('${imagesArray[i]}')`;
                    if (i < combinations.length - 1) {
                        images1.style.backgroundImage = `url('${imagesArray[i + 1]}')`;
                    } else {
                        images1.style.backgroundImage = `url('${imagesArray[i]}')`;
                    }
                    images1.style.opacity = ((scrollPortion - combinations[i].start) / (combinations[i].end));
                    images.style.opacity = 1 - ((scrollPortion - combinations[i].start) / (combinations[i].end));
                }
            };

            if (divText.scrollHeight - divText.scrollTop === divText.clientHeight) {
                arrow.setAttribute('src', "img/cross.png");
            } else {
                arrow.setAttribute('src', "img/arrow-down.png");
            }
            if (divText.scrollTop == 0) {
                images.style.backgroundImage = `url('${imagesArray[0]}')`;
                images1.style.opacity = 1;
                if (imagesArray.length > 0) {
                    images1.style.backgroundImage = `url('${imagesArray[1]}')`;
                    images1.style.opacity = 0;
                }
            }
        };

        function loadCSS() {
            var link = document.createElement("link");
            link.href = '/imta.github.io/style.css';
            link.id = '/imta.github.io/style';
            link.type = "text/css";
            link.rel = "stylesheet";
            document.getElementsByTagName("head")[0].appendChild(link);
        }

        // function unloadCSS(file) {
        //     var cssNode = document.getElementById(file);
        //     cssNode && cssNode.parentNode.removeChild(cssNode);
        // }
    </script>
</body>

</html>
